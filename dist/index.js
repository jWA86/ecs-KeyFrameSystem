!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("ecs-framework")):"function"==typeof define&&define.amd?define(["ecs-framework"],e):"object"==typeof exports?exports.ecs=e(require("ecs-framework")):t.ecs=e(t["ecs-framework"])}("undefined"!=typeof self?self:this,function(t){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n;!function(t){t[t.started=0]="started",t[t.playing=1]="playing",t[t.ended=2]="ended",t[t.stopped=3]="stopped",t[t.paused=4]="paused"}(n||(n={})),e.PlaybackState=n;var o=function(){function t(t,e,r,o,a){void 0===a&&(a={P1x:0,P1y:0,P2x:1,P2y:1}),this.entityId=t,this.active=e,this.from=r,this.duration=o,this.easingParams=a,this.nbLoop=1,this.progress=0,this.playState=n.stopped,this.timer={count:0,delta:0,loopCount:0,reverse:!1,time:0},this.cycling=!1,this.fadeLoop=!1}return t}();e.KeyFrameControllerComponent=o},function(t,e,r){t.exports=r(2)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0);e.KeyFrameControllerComponent=n.KeyFrameControllerComponent,e.PlaybackState=n.PlaybackState;var o=r(3);e.KeyFrameSystem=o.KeyFrameSystem},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=r(4),a=r(5);e.bezier=a;var i=r(0),u=function(t){function e(){return t.call(this)||this}return n(e,t),e.changeDirection=function(t,e){if(!(t.timer.loopCount>=t.nbLoop&&0!==t.nbLoop)){if(t.cycling)t.timer.reverse=!t.timer.reverse,t.fadeLoop||(t.timer.reverse?t.timer.time=t.duration:t.timer.time=0);else if(t.fadeLoop){var r=t.duration-t.timer.time,n=e.delta-r;t.timer.time=n}else t.timer.time=0;var o=a(t.easingParams.P1x,t.easingParams.P1y,t.easingParams.P2x,t.easingParams.P2y);t.progress=o(t.timer.time/t.duration),t.playState=i.PlaybackState.started}},e.prototype.execute=function(t,r){if(t.playState!==i.PlaybackState.paused){var n=t.timer.loopCount>=t.nbLoop&&0!==t.nbLoop;if(n&&t.playState===i.PlaybackState.ended)return t.playState=i.PlaybackState.stopped,void(t.timer.count+=1);var o=t.from*(t.timer.loopCount+1),u=t.from+t.duration*(t.timer.loopCount+1);if(t.playState===i.PlaybackState.stopped&&r.time>=o&&r.time<=u&&!n)return t.playState=i.PlaybackState.started,t.timer.count+=1,void(t.timer.reverse&&(t.timer.time=t.duration));if((t.playState===i.PlaybackState.started||t.playState===i.PlaybackState.playing)&&r.time>=o&&r.time<=u&&!n){t.playState=i.PlaybackState.playing,t.timer.reverse?t.timer.time-=r.delta:t.timer.time+=r.delta,t.timer.delta=r.delta,t.timer.count+=1;var s=a(t.easingParams.P1x,t.easingParams.P1y,t.easingParams.P2x,t.easingParams.P2y);return void(t.progress=s(t.timer.time/t.duration))}return(t.playState===i.PlaybackState.started||t.playState===i.PlaybackState.playing)&&r.time>=o&&r.time>u&&!n?(t.playState=i.PlaybackState.ended,t.timer.loopCount+=1,t.timer.count+=1,void e.changeDirection(t,r)):void 0}},e}(o.System);e.KeyFrameSystem=u},function(e,r){e.exports=t},function(t,e,r){var n,n;!function(e){t.exports=e()}(function(){return function t(e,r,o){function a(u,s){if(!r[u]){if(!e[u]){var c="function"==typeof n&&n;if(!s&&c)return n(u,!0);if(i)return i(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var p=r[u]={exports:{}};e[u][0].call(p.exports,function(t){var r=e[u][1][t];return a(r||t)},p,p.exports,t,e,r,o)}return r[u].exports}for(var i="function"==typeof n&&n,u=0;u<o.length;u++)a(o[u]);return a}({1:[function(t,e,r){function n(t,e){return 1-3*e+3*t}function o(t,e){return 3*e-6*t}function a(t){return 3*t}function i(t,e,r){return((n(e,r)*t+o(e,r))*t+a(e))*t}function u(t,e,r){return 3*n(e,r)*t*t+2*o(e,r)*t+a(e)}function s(t,e,r,n,o){var a,u,s=0;do{u=e+(r-e)/2,a=i(u,n,o)-t,a>0?r=u:e=u}while(Math.abs(a)>p&&++s<l);return u}function c(t,e,r,n){for(var o=0;o<f;++o){var a=u(e,r,n);if(0===a)return e;e-=(i(e,r,n)-t)/a}return e}var f=4,p=1e-7,l=10,m=11,y=1/(m-1),d="function"==typeof Float32Array;e.exports=function(t,e,r,n){function o(e){for(var n=0,o=1,i=m-1;o!==i&&a[o]<=e;++o)n+=y;--o;var f=(e-a[o])/(a[o+1]-a[o]),p=n+f*y,l=u(p,t,r);return l>=.001?c(e,p,t,r):0===l?p:s(e,n,n+y,t,r)}if(!(0<=t&&t<=1&&0<=r&&r<=1))throw new Error("bezier x values must be in [0, 1] range");var a=d?new Float32Array(m):new Array(m);if(t!==e||r!==n)for(var f=0;f<m;++f)a[f]=i(f*y,t,r);return function(a){return t===e&&r===n?a:0===a?0:1===a?1:i(o(a),e,n)}}},{}]},{},[1])(1)})}])});